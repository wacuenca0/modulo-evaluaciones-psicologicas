<app-nav></app-nav>
<div class="clinic-container py-8">
  <div class="w-full max-w-md mx-auto bg-white rounded-lg shadow p-8">
    <app-users-tabs></app-users-tabs>
    <h2 class="text-2xl font-semibold mb-4">Crear usuario</h2>
    <form (ngSubmit)="submit()" [formGroup]="form" class="space-y-4">
      <div>
        <label for="username" class="form-label">Usuario</label>
        <input id="username" autocomplete="username" formControlName="username" class="form-input w-full" type="text" />
      </div>
      <div>
        <label for="email" class="form-label">Correo</label>
        <input id="email" type="email" formControlName="email" class="form-input w-full" autocomplete="off" />
      </div>
      <div>
        <label for="password" class="form-label">Contraseña</label>
        <input id="password" type="password" autocomplete="new-password" formControlName="password" class="form-input w-full" />
      </div>
      <div>
        <label for="roleId" class="form-label">Rol</label>
        <select id="roleId" formControlName="roleId" class="form-input w-full">
          <option [ngValue]="null" disabled>Seleccione un rol</option>
          @for (r of roles(); track r.id) {
            <option [ngValue]="r.id">{{ r.name }}</option>
          }
        </select>
      </div>
      @if (error()) {
        <div class="text-sm text-red-600" role="alert">{{ error() }}</div>
      }
      <div class="flex justify-end">
        <button class="btn-primary" type="submit" [disabled]="loading() || form.invalid">{{ loading() ? 'Guardando…' : 'Guardar' }}</button>
      </div>
    </form>
  </div>
</div>
